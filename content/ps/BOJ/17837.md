---
title: '17837. ìƒˆë¡œìš´ ê²Œì„2'
metaTitle: 'ë§Œë ™ ê°œë°œì í‚¤ìš°ê¸°'
metaDescription: 'ì•Œê³ ë¦¬ì¦˜ ë¬¸ì œë¥¼ í’€ê³  ì •ë¦¬í•œ ê³³ì…ë‹ˆë‹¤.'
tags: ['êµ¬í˜„', 'ì‹œë®¬ë ˆì´ì…˜']
date: '2021-02-02'
---

# ë¬¸ì œ

- [17837. ìƒˆë¡œìš´ ê²Œì„2](https://www.acmicpc.net/problem/17837)

## ì½”ë“œ

<details><summary> ì½”ë“œ ë³´ê¸° </summary>

```java
import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStreamReader;
import java.util.*;

class Pair{
    int id, d;

    public Pair(int id, int d) {
        this.id = id;
        this.d = d;
    }
}
class Pawn{
    int x, y, d;

    public Pawn(int x, int y, int d) {
        this.x = x;
        this.y = y;
        this.d = d;
    }
}

public class Q17837 {
    static int n, k, board[][], dx[] = {0, 0, 0, -1, 1}, dy[] = {0, 1, -1, 0, 0};
    static List<Pair> pawn[][]; // ë§ì˜ ìˆœì„œ, ë°©í–¥ ì €ì¥
    static Pawn pawn_info[]; // ë§ì˜ ì •ë³´ ì €ì¥
    public static void main(String[] args) throws IOException {
        init();
        solution();
    }

    private static void solution() {
        for (int turn = 1; turn <= 1000; turn++) {
            //System.out.println("------ Turn " + turn + " ------");
            for (int i = 1; i <= k; i++) {
                Pawn here = pawn_info[i];
                List<Pair> from = pawn[here.x][here.y];
                int nx = here.x + dx[here.d], ny = here.y + dy[here.d];

                if(!isBorder(nx, ny) || board[nx][ny] == 2){ // out of bound or blue
                    nx = here.x - dx[here.d]; ny = here.y - dy[here.d];
                    if(here.d == 1) here.d = 2;
                    else if(here.d == 2) here.d = 1;
                    else if(here.d == 3) here.d = 4;
                    else if(here.d == 4) here.d = 3;
                    for (int j = 0; j < from.size(); j++) {
                        Pair p = from.get(j);
                        if(p.id == i) p.d = here.d;
                    }
                    if(!isBorder(nx, ny) || board[nx][ny] == 2) continue;
                    here.x = nx; here.y = ny;
                }
                here.x = nx; here.y = ny;

                List<Pair> there = pawn[nx][ny];

                if(board[nx][ny] == 0) { // white
                    boolean flag = false;
                    for(int j = 0; j< from.size();){
                        Pair p = from.get(j);
                        if(p.id == i) flag =true;
                        if(!flag) {
                            ++j;
                            continue;
                        }
                        pawn_info[p.id].x = nx;
                        pawn_info[p.id].y = ny;
                        pawn_info[p.id].d = p.d;
                        there.add(p);
                        from.remove(j);
                    }
                }
                else if(board[nx][ny] == 1) { // red
                    boolean flag = false;
                    for (int j = from.size() - 1; j >= 0 ; --j) {
                        if(flag) continue;
                        Pair p = from.get(j);
                        if(p.id == i) flag = true;
                        pawn_info[p.id].x = nx;
                        pawn_info[p.id].y = ny;
                        pawn_info[p.id].d = p.d;
                        there.add(p);
                        from.remove(j);
                    }
                }
                if(there.size() >= 4){
                    System.out.println(turn);
                    return;
                }
                /*System.out.println("------ " + i + " move ------");
                for (int idx = 1; idx <= n; idx++) {
                    for (int j = 1; j <= n; j++) {
                        System.out.printf("%c", '(');
                        for (int l = 0; l < pawn[idx][j].size(); l++) {
                            System.out.print(pawn[idx][j].get(l).id + ",");
                        }
                        System.out.printf("%-4c", ')');
                    }
                    System.out.println();
                }
                System.out.println();*/
            }
            for (int i = 1; i <= k; i++) {
                Pawn p = pawn_info[i];
                if(pawn[p.x][p.y].size() >= 4){
                    System.out.println(turn);
                    return;
                }
            }
            /*System.out.println("------ í˜„ì¬ê¹Œì§€ ë°©í–¥ ------");
            for (int i = 1; i <= k; i++) {
                System.out.println(i + " : " + pawn_info[i].d);
            }
            System.out.println("--------------------");*/
        }
        System.out.println(-1);
    }


    private static boolean isBorder(int x, int y) {
        return (x >= 1 && x <= n && y >= 1 & y <= n);
    }

    static void init() throws IOException {
        BufferedReader br = new BufferedReader(new InputStreamReader(System.in));
        StringTokenizer st = new StringTokenizer(br.readLine());
        n = Integer.parseInt(st.nextToken());
        k = Integer.parseInt(st.nextToken());
        board = new int[n + 1][n + 1]; pawn = new List[n + 1][n + 1]; pawn_info = new Pawn[k + 1];
        for (int i = 1; i <= n; i++) {
            st = new StringTokenizer(br.readLine());
            for (int j = 1; j <= n; j++) {
                board[i][j] = Integer.parseInt(st.nextToken());
                pawn[i][j] = new ArrayList<>();
            }
        }
        for (int i = 1; i <= k; i++) {
            st = new StringTokenizer(br.readLine());
            int x = Integer.parseInt(st.nextToken());
            int y = Integer.parseInt(st.nextToken());
            int d = Integer.parseInt(st.nextToken());
            Pawn p = new Pawn(x, y, d);
            pawn_info[i] = p;
            pawn[x][y].add(new Pair(i, d));
        }
    }
}
/*
4 4
1 1 1 1
1 1 1 1
1 1 1 1
1 1 1 1
1 1 1
2 1 3
1 2 2
1 3 2
 */
```

</details>

## â­ï¸ëŠë‚€ì â­ï¸

> ì •ë§ ëŒ€ë‹¨í•œ êµ¬í˜„ ë¬¸ì œì˜€ë‹¤. 4ì‹œê°„ì •ë„ ê±¸ë ¤ì„œ ê²¨ìš° í‘¼ ë¬¸ì œ.

> ì§ì ‘ ì¶œë ¥ ì°ì–´ê°€ë©´ì„œ ë¡œì§ì„ í™•ì¸í•´ë´¤ê³ , í…Œì¼€ëŠ” ëª¨ë‘ ì˜ ë‚˜ì™”ìœ¼ë‚˜ ë‹¤ë¥¸ ë¶€ë¶„ì—ì„œ ì˜ëª» ìƒê°í•´ì„œ í‹€ë ¸ì—ˆë‹¤. -> ì¡°ê±´ì— ìœ„ë°°ë˜ì§€ ì•Šì„ ê±°ë¼ê³  ìƒê°í•˜ê³  ê·¸ëƒ¥ ë„˜ì–´ê°”ë˜ ë¶€ë¶„ì´ í™”ê·¼ì´ ë˜ì—ˆë‹¤.

## í’€ì´ ğŸ“£

<hr/>

1ï¸âƒ£ ë³´ë“œ ìœ„ì— ê° ì¹¸ì— ëŒ€í•œ ìƒ‰ì˜ ì •ë³´ë¥¼ ì…ë ¥ë°›ì•„ì„œ ì €ì¥í•œë‹¤.

    - 0 ì´ë©´ í°ìƒ‰

    - 1 ì´ë©´ ë¹¨ê°„ìƒ‰

    - 2 ì´ë©´ íŒŒë€ìƒ‰

2ï¸âƒ£ ë§íŒ `Pawn` ì˜ ì •ë³´ë¥¼ ì €ì¥í•˜ëŠ” `Pawn pawn_info[]` ë¥¼ ë§Œë“¤ì–´ì„œ ì…ë ¥ë°›ì€ ë§íŒì˜ ì •ë³´ë¥¼ ìˆœì„œëŒ€ë¡œ ì €ì¥í•œë‹¤.

3ï¸âƒ£ ë³´ë“œ ìœ„ì— ê° ì¹¸ì— ë†“ì—¬ìˆëŠ” ë§íŒì„ ê´€ë¦¬í•˜ê¸° ìœ„í•´ì„œ `List<Pair> pawn[ë§íŒì˜ ìˆœì„œ][ë§íŒì˜ ë°©í–¥]` ì„ ì €ì¥í•´ ì´ìš©í•œë‹¤.

4ï¸âƒ£ ë§íŒì„ ì´ë™í•  ë•Œ, ë‹¤ìŒ ì¹¸ì— ìƒ‰ê¹”ì— ë”°ë¼ í•´ë‹¹ ë§íŒì´ ì—…ê³  ìˆëŠ” ë‹¤ë¥¸ ë§íŒë“¤ê³¼ í•´ë‹¹ ë§íŒì´ ë†“ì´ëŠ” ë°©ë²•ì´ ë‹¬ë¼ì§„ë‹¤.

    - í°ìƒ‰ì´ë©´ í•´ë‹¹ ë§íŒì´ ì—…ê³  ìˆëŠ” ìˆœì„œëŒ€ë¡œ ë‹¤ìŒ ì¹¸ìœ¼ë¡œ ì´ë™.

    - ë¹¨ê°„ìƒ‰ì´ë©´ í•´ë‹¹ ë§íŒì´ ì—…ê³  ìˆëŠ” ìˆœì„œì˜ ë°˜ëŒ€ë¡œ ë‹¤ìŒ ì¹¸ì— ì´ë™.

    - íŒŒë€ìƒ‰ ë˜ëŠ” ì¥ì™¸ë¥¼ ë²—ì–´ë‚˜ëŠ” ê²½ìš° ë°˜ëŒ€ ë°©í–¥ì˜ ì¹¸ìœ¼ë¡œ í•œì¹¸ ì´ë™.

    - ì´ ë•Œ ë§Œì•½ ë°˜ëŒ€ ë°©í–¥ì˜ ì¹¸ë„ íŒŒë€ìƒ‰ ë˜ëŠ” ì¥ì™¸ë¥¼ ë²—ì–´ë‚œë‹¤ë©´ í•´ë‹¹ ë§íŒì€ ì´ë™ì„ ë©ˆì¶˜ë‹¤. (ì´ë™ì€ ì•ˆí•´ë„ ë°©í–¥ì€ ë°”ê»´ì•¼í•¨)

5ï¸âƒ£ 1000ë²ˆì˜ ì‹œí–‰ì„ í†µí•´ ê° ë§íŒì´ ì´ë™ì„ í•˜ê³ , ë§Œì•½ í•œ ì¹¸ì— 4ê°œ ì´ìƒì˜ ë§íŒì´ ë†“ì—¬ ìˆëŠ” ê²½ìš°ê°€ ë°œìƒí•˜ë©´ ê·¸ í„´ì„ ì¶œë ¥í•˜ê³  ì¢…ë£Œí•œë‹¤.

<hr/>

## ì‹¤ìˆ˜ ğŸ˜…

- íŒŒë€ìƒ‰ ë˜ëŠ” ì¥ì™¸ë¥¼ ë²—ì–´ë‚  ê²½ìš° ë°˜ëŒ€ ë°©í–¥ìœ¼ë¡œ ë‹¤ì‹œ í•œ ë²ˆ ê°™ì€ ì¡°ê±´ì„ ë”°ì ¸ë´¤ë‹¤. ë§Œì•½ ë˜ ê°™ì€ ì¡°ê±´ì— ê±¸ë¦°ë‹¤ë©´ ì´ë™ì„ ë©ˆì¶”ê³  `continue` í–ˆì—ˆë‹¤

* í•˜ì§€ë§Œ ê·¸ ë§íŒì˜ ë°©í–¥ì€ ê³„ì†í•´ì„œ ë°”ê¿”ì¤˜ì•¼í–ˆë‹¤.. ë‹¤ë¥¸ ë§íŒì´ ê·¸ ì¹¸ì— ë“¤ì–´ì™€ì„œ ë¹¼ë‚´ì–´ ê°ˆ ìˆ˜ ìˆê¸° ë•Œë¬¸ì´ë‹¤!.
