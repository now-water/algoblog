---
title: '1949. ìš°ìˆ˜ ë§ˆì„'
metaTitle: 'ë§Œë ™ ê°œë°œì í‚¤ìš°ê¸°'
metaDescription: 'ì•Œê³ ë¦¬ì¦˜ ë¬¸ì œë¥¼ í’€ê³  ì •ë¦¬í•œ ê³³ì…ë‹ˆë‹¤.'
tags: ['DP', 'íŠ¸ë¦¬ DP']
date: '2021-03-30'
---

# ë¬¸ì œ

- [1949. ìš°ìˆ˜ ë§ˆì„](https://www.acmicpc.net/problem/1949)

## ì½”ë“œ

<details><summary> ì½”ë“œ ë³´ê¸° </summary>

```java
import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStreamReader;
import java.util.ArrayList;
import java.util.Arrays;
import java.util.List;
import java.util.StringTokenizer;

public class Q1949 {
    static int n, resident[], cache[][];
    static List<Integer> adj[];
    static boolean visited[];
    public static void main(String[] args) throws IOException {
        init();
        solution();
    }

    private static void solution() {
        visited[1] = true;
        System.out.println(Math.max(dfs(1, 0), dfs(1, 1)));
    }

    private static int dfs(int idx, int state) {
        if(cache[idx][state] != -1)
            return cache[idx][state];
        visited[idx] = true;
        int ret = (state == 0? 0: resident[idx]);

        for (Integer next : adj[idx]) {
            if(visited[next]) continue;
            if(state == 0)
                ret += Math.max(dfs(next, 0), dfs(next, 1));
            else
                ret += dfs(next, 0);
        }
        visited[idx] = false;
        return cache[idx][state] = ret;
    }

    private static void init() throws IOException {
        BufferedReader br = new BufferedReader(new InputStreamReader(System.in));
        n = stoi(br.readLine());
        resident = new int[n + 1];
        adj = new List[n+1];
        visited = new boolean[n + 1];
        cache = new int[n + 1][2];
        StringTokenizer st = new StringTokenizer(br.readLine());

        for (int i = 1; i <= n; i++) {
            resident[i] = stoi(st.nextToken());
            adj[i] = new ArrayList<>();
            Arrays.fill(cache[i], -1);
        }

        for (int i = 0; i < n - 1; i++) {
            st = new StringTokenizer(br.readLine());
            int u = stoi(st.nextToken());
            int v = stoi(st.nextToken());
            adj[u].add(v);
            adj[v].add(u);
        }
    }

    private static int stoi(String str) {
        return Integer.parseInt(str);
    }
}

```

</details>

## â­ï¸ëŠë‚€ì â­ï¸

> íŠ¸ë¦¬ DP ê°€ ê·¸ë ‡ê²Œ ì–´ë ¤ìš´ ë‚´ìš©ì€ ì•„ë‹Œ ê²ƒ ê°™ë‹¤. ì •í•´ì§„ í’€ì´ ë°©ì‹ì´ ì¡´ì¬í•˜ëŠ” ê¸°ë¶„ì´ë‹¤.

## í’€ì´ ğŸ“£

<hr/>

1ï¸âƒ£ ë‹¤ìŒê³¼ ê°™ì´ ìºì‹œ ì •ë³´ë¥¼ ì €ì¥í•  ìˆ˜ ìˆë‹¤.

    - cache[í˜„ì¬ ë§ˆì„ì˜ ì¸ë±ìŠ¤][ìš°ìˆ˜ ë§ˆì„ ì„ ì • ì—¬ë¶€] : ìš°ìˆ˜ ë§ˆì„ì´ë©´ 1, ì•„ë‹ˆë©´ 0

2ï¸âƒ£ í˜„ì¬ ë…¸ë“œë¥¼ ìš°ìˆ˜ ë§ˆì„ë¡œ ì„ ì •í•˜ë©´ í•´ë‹¹ ë§ˆì„ê³¼ ì—°ê²°ëœ ë§ˆì„ë“¤ì€ ìš°ìˆ˜ ë§ˆì„ì´ ë  ìˆ˜ ì—†ë‹¤.

    - í˜„ì¬ ë…¸ë“œì—ì„œ ë˜ ì—°ê²° ê°€ëŠ¥í•œ ë§ˆì„ë“¤ì˜ ì¸êµ¬ ìˆ˜ëŠ” ì •ë‹µì— í¬í•¨í•˜ì§€ ì•ŠëŠ”ë‹¤.

3ï¸âƒ£ í˜„ì¬ ë…¸ë“œê°€ ìš°ìˆ˜ ë§ˆì„ì´ ì•„ë‹ˆë¼ë©´, ì—°ê²°ëœ ë§ˆì„ë“¤ì€ ìš°ìˆ˜ ë§ˆì„ì´ ë  ìˆ˜ë„ ìˆê³  ì•ˆë  ìˆ˜ë„ ìˆë‹¤.

    - í˜„ì¬ ë…¸ë“œì˜ ì¸êµ¬ ìˆ˜ë¥¼ ì œì™¸í•œë‹¤.

    - cache[í˜„ì¬ ë§ˆì„][ì„ ì • ì—¬ë¶€] = cache[next][0] ê³¼ cache[next][1] ì¤‘ì—ì„œ ë” í° ì¸êµ¬ ìˆ˜ë¥¼ ë”í•´ì£¼ë©´ ëœë‹¤.

4ï¸âƒ£ ê°€ì¥ ì²˜ìŒ íƒìƒ‰ì„ ì‹œì‘í•œ ë§ˆì„ì„ í†µí•´ ì¡°ê±´ì„ ë§Œì¡±í•˜ëŠ” ìµœëŒ€ ì¸êµ¬ ìˆ˜ë¥¼ êµ¬í•  ìˆ˜ ìˆë‹¤.

    - cache[1][0] ê³¼ cache[1][1] ì¤‘ ë” í° ê°’ ì¶œë ¥

    - ì™œëƒë©´ 1ë²ˆ ë§ˆì„ì„ ìš°ìˆ˜ ë§ˆì„ë¡œ ì„ ì •í•˜ê³  íƒìƒ‰í•˜ëŠ” ê²½ìš°ì™€ ì„ ì •í•˜ì§€ ì•Šê³  íƒìƒ‰í•˜ëŠ” ê²½ìš° 2ê°€ì§€ ë°–ì— ì¡´ì¬í•˜ì§€ ì•Šê¸° ë•Œë¬¸ì´ë‹¤.

## ì‹¤ìˆ˜ ğŸ˜…

<hr/>

- í˜„ì¬ ë…¸ë“œë¥¼ ì„ íƒí•˜ë©´ ë‹¤ìŒ ë…¸ë“œëŠ” ì„ íƒ ë¶ˆê°€ëŠ¥í•˜ê³ , ì„ íƒì•ˆí•˜ë©´ ë‹¤ìŒ ë…¸ë“œëŠ” ì„ íƒorë¹„ì„ íƒìœ¼ë¡œ ë‚˜ë‰œë‹¤ëŠ” ë¡œì§ì€ ë– ì˜¬ë¦´ ìˆ˜ ìˆì—ˆë‹¤.

- í•˜ì§€ë§Œ ì£¼ë¯¼ ìˆ˜ê°€ ëˆ„ì ë˜ëŠ” ê²ƒì„ ìƒê°í•˜ì§€ ëª»í–ˆë‹¤.
