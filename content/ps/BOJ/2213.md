---
title: '2213. íŠ¸ë¦¬ì˜ ë…ë¦½ì§‘í•©'
metaTitle: 'ë§Œë ™ ê°œë°œì í‚¤ìš°ê¸°'
metaDescription: 'ì•Œê³ ë¦¬ì¦˜ ë¬¸ì œë¥¼ í’€ê³  ì •ë¦¬í•œ ê³³ì…ë‹ˆë‹¤.'
tags: ['DP', 'íŠ¸ë¦¬ DP']
date: '2021-03-22'
---

# ë¬¸ì œ

- [2213. íŠ¸ë¦¬ì˜ ë…ë¦½ì§‘í•©](https://www.acmicpc.net/problem/2213)

## ì½”ë“œ

<details><summary> ì½”ë“œ ë³´ê¸° </summary>

```java
import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStreamReader;
import java.util.ArrayList;
import java.util.Arrays;
import java.util.Collections;
import java.util.List;
import java.util.StringTokenizer;

public class Q2213 {
    static int n, max, weight[] = new int[10001];
    static int cache[][] = new int[10001][2];
    static boolean visited[] = new boolean[100001];
    static List<Integer> adj[];
    static List<Integer> ans = new ArrayList<>();

    public static void main(String[] args) throws IOException {
        init();
        solution();
    }

    private static void solution() {
        visited[1] = true;
        int value = 0;
        int rootUnCheck = dfs(1, 0);
        int rootCheck = dfs(1, 1);
        Arrays.fill(visited, false);

        if(rootUnCheck < rootCheck){
            value = rootCheck;
            findMaxInd(1, 1);
        }
        else{
            value = rootUnCheck;
            findMaxInd(1, 0);
        }
        Collections.sort(ans);

        System.out.println(value);
        for (Integer i : ans)
            System.out.print(i + " ");
        System.out.println();
    }

    private static void findMaxInd(int idx, int check) {
        visited[idx] = true;
        if(check == 1){
            ans.add(idx);
            for (Integer next : adj[idx]) {
                if(visited[next])
                    continue;
                findMaxInd(next, 0);
            }
        }
        else{
            for (Integer next : adj[idx]) {
                if(visited[next]) continue;
                if(cache[next][1] >= cache[next][0])
                    findMaxInd(next, 1);
                else
                    findMaxInd(next, 0);
            }
        }
        visited[idx] = false;
    }

    private static int dfs(int idx, int check) {
        visited[idx] = true;
        int ret = (check == 1 ? weight[idx] : 0);
        if(cache[idx][check] != -1)
            return cache[idx][check];

        for (Integer next : adj[idx]) {
            if(visited[next]) continue;
            if(check == 1)
                ret += dfs(next, 0);
            else{
                ret += Math.max(dfs(next, 0), dfs(next, 1));
            }
        }
        visited[idx] = false;
        return cache[idx][check] = ret;
    }

    private static void init() throws IOException {
        BufferedReader br = new BufferedReader(new InputStreamReader(System.in));
        n = stoi(br.readLine());
        adj = new List[n + 1];
        StringTokenizer st = new StringTokenizer(br.readLine());
        for (int i = 1; i <= n; i++) {
            weight[i] = stoi(st.nextToken());
            adj[i] = new ArrayList<>();
            Arrays.fill(cache[i], -1);
        }
        for (int i = 0; i < n - 1; i++) {
            st= new StringTokenizer(br.readLine());
            int u = stoi(st.nextToken());
            int v = stoi(st.nextToken());
            adj[u].add(v);
            adj[v].add(u);
        }
    }

    private static int stoi(String str) {
        return Integer.parseInt(str);
    }
}

```

</details>

## â­ï¸ëŠë‚€ì â­ï¸

<hr/>

> ì €ë²ˆì— ì¹´ì¹´ì˜¤ ê¸°ì¶œì—ì„œ ì²˜ìŒ í’€ì–´ë´¤ë˜ íŠ¸ë¦¬ DP ìœ í˜•ì˜ ë‹¤ë¥¸ ë¬¸ì œë¥¼ í’€ì–´ë´¤ë‹¤.
>
> ê·¸ ë•Œ ë§Œí¼ ì–´ë µì§„ ì•Šì•˜ì§€ë§Œ, ê·¸ë˜ë„ í˜¼ì í˜ìœ¼ë¡œ í’€ê¸°ì—” ì¡°ê¸ˆ ì–´ë ¤ì› ë‹¤.
>
> ìµœëŒ€ í¬ê¸°ì™€ ê·¸ ë•Œì˜ ì›ì†Œë“¤ì„ ë‹¤ ê°™ì´ í•œ ë²ˆì— êµ¬í•˜ëŠ”ê²ƒì´ ì–´ë ¤ì› ë‹¤.

## í’€ì´ ğŸ“£

<hr/>

1ï¸âƒ£ ê° ë…¸ë“œë§ˆë‹¤ ì¸ì ‘í•œ ë…¸ë“œë“¤ì„ ë¦¬ìŠ¤íŠ¸ ë°°ì—´ë¡œ ì €ì¥í•œë‹¤.

2ï¸âƒ£ 1ë²ˆ ë…¸ë“œë¶€í„° ë°©ë¬¸ í‘œì‹œë¥¼ í•˜ë©° ì¸ì ‘í•œ ë‹¤ë¥¸ ë…¸ë“œë“¤ì„ íƒìƒ‰í•œë‹¤.

    - 2ì°¨ì› ìºì‹œë¥¼ í†µí•´ í˜„ì¬ ì¸ë±ìŠ¤ì™€ ì„ íƒ ì—¬ë¶€ë¥¼ ì €ì¥í•œë‹¤. cache[idx][check]

    - ë§Œì•½ í˜„ì¬ ë…¸ë“œë¥¼ ì„ íƒí•œë‹¤ë©´ ì¸ì ‘í•œ ë…¸ë“œë¥¼ íƒìƒ‰í•  ë•ŒëŠ” ì¸ì ‘í•œ ë…¸ë“œë“¤ì„ ì„ íƒí•  ìˆ˜ ì—†ë‹¤.

    - í˜„ì¬ ë…¸ë“œë¥¼ ì„ íƒí•˜ì§€ ì•ŠëŠ”ë‹¤ë©´ ì¸ì ‘í•œ ë…¸ë“œë¥¼ ì„ íƒí•˜ê±°ë‚˜ ì„ íƒí•˜ì§€ ì•Šì„ ìˆ˜ ìˆë‹¤.

3ï¸âƒ£ ê° ë…¸ë“œë§ˆë‹¤ ì´ì „ì— ë…¸ë“œì˜ ì„ íƒ ì—¬ë¶€ì— ë”°ë¼ ìµœëŒ€ ë…ë¦½ ì§‘í•©ì˜ í¬ê¸°ë¥¼ êµ¬í•´ ì €ì¥í•œë‹¤.

4ï¸âƒ£ ì²« ë²ˆì§¸ ë…¸ë“œì˜ ì„ íƒ ì—¬ë¶€ì— ë”°ë¼ì„œ ìµœëŒ€ í¬ê¸°ì˜ ë…ë¦½ ì§‘í•©ì— í¬í•¨ë˜ëŠ” ì›ì†Œ íƒìƒ‰ì´ ê²°ì •ëœë‹¤.

    - ì´ì „ ë…¸ë“œë¥¼ ì„ íƒí–ˆë‹¤ë©´ í˜„ì¬ ë…¸ë“œëŠ” ì„ íƒí•  ìˆ˜ ì—†ë‹¤. ì´ì „ ë…¸ë“œì˜ ì¸ë±ìŠ¤ë¥¼ ans ë¦¬ìŠ¤íŠ¸ì— ì¶”ê°€í•´ì¤€ë‹¤. - if(check == 1) ans.add(idx)

    - ì´ì „ ë…¸ë“œë¥¼ ì„ íƒí•˜ì§€ ì•Šì•˜ë‹¤ë©´ ë‹¤ìŒ ë…¸ë“œë¥¼ ì„ íƒí•œ ê²½ìš°ì™€ ì„ íƒí•˜ì§€ ì•Šì€ ê²½ìš° ì¤‘ ë” í° ë…ë¦½ì§‘í•©ì„ ê°€ì§€ëŠ” ê²½ìš°ë¥¼ ì¶”ì í•œë‹¤.

    - cache[next][1] >= cache[next][0] => findMaxInd(next, 1);

    - cache[next][1] < cache[next][0] => findMaxInd(next, 0);

5ï¸âƒ£ ëª¨ë‘ ì¶”ì í•œ ìµœëŒ€ í¬ê¸°ì˜ ë…ë¦½ ì§‘í•©ì— í¬í•¨ë˜ëŠ” ì›ì†Œë“¤ì„ ì¶œë ¥í•œë‹¤.

## ì‹¤ìˆ˜ ğŸ˜…

<hr/>

- ìµœëŒ€ ë…ë¦½ ì§‘í•©ì˜ í¬ê¸°ì™€ í¬í•¨ë˜ëŠ” ì›ì†Œë“¤ì„ í•œ ë²ˆì— êµ¬í•˜ë ¤ê³  í–ˆëŠ”ë° í•œ ìª½ì„ ìƒê°í•˜ê³  ì§œë©´ ë‹¤ë¥¸ ìª½ì´ ë§‰íˆëŠ” ë“±ì˜ ë¬¸ì œì ì´ ë°œìƒí–ˆë‹¤.

* ê²°êµ­ ë‘ ê°€ì§€ë¥¼ ë¶„ë¦¬í•´ì„œ ë”°ë¡œ êµ¬í•´ì„œ ì¶œë ¥í•´ì•¼ë§Œ í–ˆë‹¤.
