# ë¬¸ì œ
- [11451.íŒ©ë§¨](https://www.acmicpc.net/problem/11451)

## ì½”ë“œ
```javascript
#include <iostream>
#include <queue>
#include <string>
#include <cstring>
#define FASTIO ios_base::sync_with_stdio(false); cin.tie(NULL); cout.tie(NULL);
#define ll long long
#define pii pair<int, int>
#define pll pair<ll, ll>
#define INF 987654321
using namespace std;
int m, n;
int dx[4] = { -1, 0, 1, 0 }, dy[4] = { 0, 1, 0, -1 }, visit[50][50][50][50];
string board[50], dir[4] = { "N", "E", "S", "W" };
struct pos
{
	pii m1, m2;
	string chunk;
};
void outControl(int* x, int* y)
{
	// ìƒ-ìš°-í•˜-ì¢Œ
	if (*x < 0) *x += m;
	else if (*y >= n) *y -= n;
	else if (*x >= m) *x -= m;
	else if(*y < 0) *y += n;
}
string play(queue<pos> move)
{
	while (!move.empty())
	{
		pos round = move.front(); move.pop();
		pii pack1 = round.m1, pack2 = round.m2;
		string chunk = round.chunk;
		int x1 = pack1.first, y1 = pack1.second, x2 = pack2.first, y2 = pack2.second;
		visit[x1][y1][x2][y2] = 0;
		for (int i = 0; i < 4; ++i)
		{
			/* b1 ì´ë™ */
			int nx = x1 + dx[i], ny = y1 + dy[i];
			outControl(&nx, &ny);
			if (board[nx][ny] == 'G') continue;
			if (board[nx][ny] == 'X')  
			{
				nx = x1;
				ny = y1;
			}

			/* b2 ì´ë™ */
			int mx = x2 + dx[i], my = y2 + dy[i];
			outControl(&mx, &my);
			if (board[mx][my] == 'G') continue;
			if (board[mx][my] == 'X')
			{
				mx = x2;
				my = y2;
			}
			if (visit[nx][ny][mx][my] <= visit[x1][y1][x2][y2] + 1)
				continue; // ë°©ë¬¸í•œ ê³³ì´ë©´ ì¬ë°©ë¬¸ X, ë²½ì´ ìˆëŠ” ìœ„ì¹˜ëŠ” ë°©ë¬¸í•  ìˆ˜ ì—†ìœ¼ë¯€ë¡œ ì œìë¦¬ ìœ„ì¹˜ ê°€ëŠ¥

			/* ë°©ë¬¸ ì²´í¬ */
			visit[nx][ny][mx][my] = visit[x1][y1][x2][y2] + 1;

			/* í•© ì²´ ! */
			if (nx == mx && ny == my)
				return chunk + dir[i];
			
			move.push({ pii(nx, ny), pii(mx, my), chunk + dir[i]});
		}
	}
	return "";
}
int main()
{
	int tc;
	FASTIO
	cin >> tc;
	while (tc-- > 0)
	{
		pii b1 = { 0, 0 }, b2 = { 0, 0 };
		cin >> m >> n;
		for (int i = 0; i < 50; ++i)
			for (int j = 0; j < 50; ++j)
				for (int k = 0; k < 50; ++k)
					for (int l = 0; l < 50; ++l) visit[i][j][k][l] = INF;
		for (int i = 0; i < m; ++i)
		{
			cin >> board[i];
			for (int j=0; j<n; ++j)
			{
				if (board[i][j] == 'P')
				{
					if (b1.first == 0 && b1.second == 0) b1 = pii(i, j);
					else b2 = pii(i, j);
				}
			}
		}
		queue<pos> move;
		move.push({ { b1.first, b1.second }, { b2.first, b2.second }, ""});
		string ans = play(move);
		int len = ans.length();
		if(len) cout << len << ' ' << ans << '\n';
		else cout << "IMPOSSIBLE" << '\n';
	}
}

```

## â­ï¸ëŠë‚€ì â­ï¸
> ì²˜ìŒì— ì¡°ê±´ì„ í•˜ë‚˜í•˜ë‚˜ ë”°ì ¸ë³´ë©´ì„œ "ìŒ ë³µì¡í•˜êµ°" ì‹¶ì—ˆê³ , ìœ ë ¹ê³¼ ë¼ì´í”„ ì¡°ê±´ì„ ë´¤ì„ ë•Œ "ìŒ ì–´ë µêµ°" ì‹¶ì—ˆê³ , í…Œì¼€ ë‹¤ í†µê³¼í•˜ê³  ì œì¶œí•˜ê³  ë©”ëª¨ë¦¬ ì´ˆê³¼ ë–´ì„ ë•Œ "ì•„ ì¡°ì¡Œë‹¤" ì‹¶ì—ˆë‹¤.

## í’€ì´ ğŸ“£
<hr/>
<ol type="I">
    <li> ë‘ íŒ©ë§¨ì€ í•œ ë²ˆì˜ ì´ë™ìœ¼ë¡œ ê°™ì´ ì›€ì§ì´ë¯€ë¡œ ì´ë“¤ì˜ ì •ë³´ì™€ ì´ë™í•œ ê²½ë¡œë¥¼ í•¨ê»˜ ì €ì¥í•˜ëŠ” êµ¬ì¡°ì²´ë¥¼ ë§Œë“¤ì–´ ë³´ê´€í•œë‹¤. </li>
    <li> BFSë¥¼ ëŒë©´ì„œ 2ê°œì˜ íŒ©ë§¨ ì¤‘ ì¥ì™¸ë¥¼ ë²—ì–´ë‚˜ë©´ ë°˜ëŒ€í¸ì—ì„œ ë‚˜íƒ€ë‚˜ë„ë¡ ì¡°ì •í•´ì£¼ê³ , ë²½ì„ ë§Œë‚˜ë©´ ì œìë¦¬ì—ì„œ ë©ˆì¶”ë„ë¡ ì¡°ì •í•´ì£¼ì—ˆë‹¤. </li>
    <li> int visit[x1][y1][x2][y2] ë¥¼ í†µí•´ íŒ©ë§¨1ê³¼ íŒ©ë§¨2ì˜ í˜„ì¬ ì¢Œí‘œë¥¼ ê¸°ì¤€ìœ¼ë¡œ ì²˜ìŒ ë°©ë¬¸í–ˆì„ ë•Œì˜ ë¹„ìš©ì„ ì €ì¥í•´ì¤€ë‹¤. </li>
    <li> ì´ í›„, í•´ë‹¹ ë¹„ìš©ì„ í† ëŒ€ë¡œ ë‹¤ìŒìœ¼ë¡œ ë°©ë¬¸í•  ì§€ì—­ì„ ê°€ì§€ì¹˜ê¸° í•œë‹¤. </li>
    <li> ë‘ íŒ©ë§¨ì´ ë§Œë‚˜ê²Œ ë˜ë©´ ê·¸ ë•Œ ê¹Œì§€ì˜ ê²½ë¡œì •ë³´ë¥¼ ì¶œë ¥í•œë‹¤. </li>
</ol>
<hr/>

## ì‹¤ìˆ˜ ğŸ˜…
- íì— ìœ„ì¹˜ì •ë³´ë¥¼ ì €ì¥í•  ë•Œ ë°©ë¬¸ì •ë³´ë¥¼ ê¸°ì¤€ìœ¼ë¡œ í•˜ëŠ” ê°€ì§€ì¹˜ê¸°ë¥¼ ì˜ëª» í–ˆë‹¤.
- (ì´ì°¨ì› ë°°ì—´ì¸ visit1ê³¼ visit2ë¥¼ ì´ìš©í•œ ë°©ë¬¸ ì •ë³´, ë‘ íŒ©ë§¨ì´ ëª¨ë‘ ìƒˆë¡œìš´ ì¢Œí‘œë¡œ ì´ë™í•˜ì˜€ì„ ë•Œ) ì˜ ê²½ìš°ì—ë§Œ ê°€ì§€ì¹˜ê¸°ë¥¼ í•˜ì—¬ì„œ íì— ë„ˆë¬´ ë§ì€ ì“¸ë°ì—†ëŠ” ì •ë³´(ì¤‘ë³µ)ê°€ ë‹´ê²¨ì„œ ë©”ëª¨ë¦¬ê°€ ì´ˆê³¼ê°€ ê³„ì† ë‚¬ì—ˆë‹¤.